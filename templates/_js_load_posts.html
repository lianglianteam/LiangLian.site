<script>
    // load posts under #post-box
    function load_posts(page, type, per_page, post_box, me) {
        var box = $(post_box);
        var spinner = document.createElement('span');
        spinner.className = "spinner-border spinner-border-sm mr-2";
        spinner.setAttribute("role", "status");
        spinner.id = 'spinner-'+type;
        me.appendChild(spinner);
        $.ajax({
            url: "{{ url_for('motion_load_posts') }}",
            type: "post",
            data: {page: page, type:type, per_page:per_page},
            success: function(response) {
                box.append(response['posts']);
                if (response['has_nxt'] === true){
                    me.innerText = 'åŠ è½½æ›´å¤š';
                }else{
                    me.innerText = 'æ²¡æœ‰å•¦: )';
                    me.disabled = true
                }
                me.onclick = function(){load_posts(page+1, type, per_page, post_box, me)}
                spinner.remove()
            },
            error: function(xhr) {
                me.innerText = 'åŠ è½½å¤±è´¥ðŸ˜¢';
                spinner.remove()
            }
        });
    }
</script>